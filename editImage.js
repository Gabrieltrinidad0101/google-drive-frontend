(()=>{"use strict";var t={122:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(645),i=n.n(r)()((function(t){return t[1]}));i.push([t.id,"*{\r\n    margin: 0;\r\n    padding: 0;\r\n}\r\nbody{\r\n    background: #313131;\r\n}\r\n\r\n.conteiner{\r\n    width: 100%;\r\n    display: flex;\r\n    justify-content: center;\r\n    flex-wrap: wrap;\r\n    margin-top: 15px;\r\n}\r\n\r\n\r\ncanvas{\r\n    cursor: pointer;\r\n    outline: 3px solid #c2c2c2;\r\n}   \r\n\r\n.tools{\r\n    width: 100%;\r\n    display: flex;\r\n    justify-content: space-evenly;\r\n    flex-direction: row;\r\n    align-items: center;\r\n    flex-wrap: wrap;\r\n}\r\n\r\n.tools div{\r\n    align-self: center;\r\n    display: flex;\r\n    align-items: center;\r\n}\r\n\r\n.tools .color-field{\r\n    height: 40px;\r\n    width: 40px;\r\n    cursor: pointer;\r\n    display: inline-block;\r\n    box-sizing: border-box;\r\n    border-radius: 50%;\r\n    border: 2px solid white;\r\n    margin: 0 15px;\r\n}\r\n\r\n.tools .button{\r\n    align-self: center;\r\n    width: 100px;\r\n    height: 40px;\r\n    border: 2px solid white;\r\n    cursor: pointer;\r\n    color:white;\r\n    background: #222;\r\n    font-weight: bold;\r\n    margin: 0 15px;\r\n}\r\n \r\n\r\n/* update button */\r\n.button.update{\r\n    background: rgb(7, 7, 70);\r\n}\r\n\r\n/* download button */\r\n.download{\r\n    text-decoration: none;\r\n    height: 40px;\r\n    font-size: 20px;\r\n    background: green;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    margin: 0 15px;\r\n    border: 2px solid white;\r\n    padding: 0 10px;\r\n    color:white;\r\n}\r\n\r\n\r\n.tools .color-picker{\r\n    align-self: center;\r\n    width: 50px;\r\n    margin: 0 15px;\r\n    height: 50px;\r\n}\r\n\r\n.pen-ranger{\r\n    align-self: center;\r\n    margin: 0 10px;\r\n}\r\n\r\n\r\n@media screen and (max-width: 383px){\r\n    .tools .button{\r\n        width: 70px;\r\n        margin: 0 5px;\r\n    }\r\n\r\n    .tools .color-picker{\r\n        width: 30px;\r\n        height: 30px;\r\n    }\r\n\r\n    .tools .color-field{\r\n        width: 30px;\r\n        height: 30px;\r\n    }\r\n}",""]);const o=i},138:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(645),i=n.n(r)()((function(t){return t[1]}));i.push([t.id,'.containerUploading{\r\n    position: fixed;\r\n    left: calc(95% - 300px);\r\n    top:calc(95% - 100px);\r\n    box-shadow: 0 0px 5px 0 rgb(0, 0, 0);\r\n    visibility:hidden;\r\n    background: #fff;\r\n}\r\n\r\n/* setting */\r\n.settingUploading{\r\n    height: 30px;\r\n    background: rgb(0, 0, 0);\r\n    color:rgb(235, 235, 235);\r\n    padding: 5px;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    font-weight: 600;\r\n\r\n}\r\n\r\n.settingUploading button{\r\n    border: none;\r\n    outline: none;\r\n    background: transparent;\r\n    font-size: 20px;\r\n    color: rgb(160, 160, 160);\r\n    padding: 3px;\r\n    position: relative;\r\n}\r\n\r\n.settingUploading button:hover::after{\r\n    content: "closet";\r\n    position: absolute;\r\n    color:#fff;\r\n    display: block;\r\n    background: #000000;\r\n    left:-10px;\r\n    top: 35px;\r\n    font-size: 15px;\r\n    padding: 5px;\r\n    font-weight: 600;\r\n}\r\n\r\n.settingUploading button:hover:first-child:after{\r\n    content: "minimize";\r\n}\r\n\r\n.settingUploading button:hover{\r\n    color:#fff;\r\n    cursor: pointer;\r\n}\r\n\r\n.uploadingFile{\r\n    padding: 10px;\r\n    width: 300px;\r\n    height: 20px;\r\n    border: 1px solid #000;\r\n}\r\n\r\n.uploadingFile .widthUploading{\r\n    width: 0;\r\n    height: 100%;\r\n    background: rgb(21, 255, 0);\r\n}\r\n\r\n/* minimize */\r\n.minimizeLoading{\r\n    clip-path: polygon(0 0, 100% 0, 100% 40px, 0 40px);   \r\n}',""]);const o=i},167:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(645),i=n.n(r)()((function(t){return t[1]}));i.push([t.id,".errorModal-container{\n    position: fixed;\n    z-index: 100;\n    width: 100%;\n    height: 100vh;\n    top: 0;\n    bottom: 0;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    background: rgba(0,0,0,0.5);\n}\n\n.errorModal{\n    width: 40%;\n    height: 50%;\n    overflow: hidden;\n    background: #fff;\n    text-align: center;\n    flex-direction: column;\n    justify-content: space-evenly;\n    position: relative;\n    transition: transform 1s; \n    transform: translateY(0%);\n}\n\n.errorModal > img{\n    margin-top: 30px;\n    height: 50%;\n}\n\n\n.closetErrorModal{\n    position: absolute;\n    top:5px;\n    right: 0px;\n    margin-right: 3px;\n    background: red;\n    border-radius: 50%;\n    padding: 1%;\n    cursor: pointer;\n}\n\n\n@media screen and (max-width: 760px){\n    .errorModal{\n        width: 90%;\n    }\n}\n\n\n\n\n\n",""]);const o=i},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=t(e);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var s=0;s<t.length;s++){var d=[].concat(t[s]);r&&i[d[0]]||(n&&(d[2]?d[2]="".concat(n," and ").concat(d[2]):d[2]=n),e.push(d))}},e}},379:(t,e,n)=>{var r,i=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),o=[];function a(t){for(var e=-1,n=0;n<o.length;n++)if(o[n].identifier===t){e=n;break}return e}function s(t,e){for(var n={},r=[],i=0;i<t.length;i++){var s=t[i],d=e.base?s[0]+e.base:s[0],l=n[d]||0,c="".concat(d," ").concat(l);n[d]=l+1;var h=a(c),u={css:s[1],media:s[2],sourceMap:s[3]};-1!==h?(o[h].references++,o[h].updater(u)):o.push({identifier:c,updater:f(u,e),references:1}),r.push(c)}return r}function d(t){var e=document.createElement("style"),r=t.attributes||{};if(void 0===r.nonce){var o=n.nc;o&&(r.nonce=o)}if(Object.keys(r).forEach((function(t){e.setAttribute(t,r[t])})),"function"==typeof t.insert)t.insert(e);else{var a=i(t.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(e)}return e}var l,c=(l=[],function(t,e){return l[t]=e,l.filter(Boolean).join("\n")});function h(t,e,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(t.styleSheet)t.styleSheet.cssText=c(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}function u(t,e,n){var r=n.css,i=n.media,o=n.sourceMap;if(i?t.setAttribute("media",i):t.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}var p=null,g=0;function f(t,e){var n,r,i;if(e.singleton){var o=g++;n=p||(p=d(e)),r=h.bind(null,n,o,!1),i=h.bind(null,n,o,!0)}else n=d(e),r=u.bind(null,n,e),i=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=s(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var r=0;r<n.length;r++){var i=a(n[r]);o[i].references--}for(var d=s(t,e),l=0;l<n.length;l++){var c=a(n[l]);0===o[c].references&&(o[c].updater(),o.splice(c,1))}n=d}}}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={id:r,exports:{}};return t[r](o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t=n(379),e=n.n(t),r=n(122);e()(r.Z,{insert:"head",singleton:!1}),r.Z.locals;let i=null,o=null;i="http://localhost:5000/",o="http://localhost:4000";var a=n(167);e()(a.Z,{insert:"head",singleton:!1}),a.Z.locals;const s=document.querySelector(".widthUploading"),d=document.querySelector(".containerUploading");function l(t){const e=Math.round(100*t.loaded/t.total);s.style.width=`${e}%`,100===e&&setTimeout((()=>{s.style.width=0,d.style="visibility: hidden;"}),100)}class c{constructor(){this.url="http://localhost:5000/",this.modalError=new class{constructor(){this.windowErrorModal=document.querySelector(".errorModal-container"),this.errorModal=document.querySelector(".errorModal"),this.buttonErrorModal=document.querySelector(".closetErrorModal"),this.buttonErrorModal.addEventListener("click",(t=>this.closetErrorModal()))}error(){this.windowErrorModal.style.visibility="visible",this.windowErrorModal.style.opacity="1"}closetErrorModal(){this.errorModal.classList.remove("modal-closet"),this.windowErrorModal.style.visibility="hidden",this.windowErrorModal.style.opacity="0"}}}async saveFile(t){try{return d.style="visibility: visible;",(await axios({method:"post",headers:{"Access-Control-Allow-Origin":this.url},url:`${this.url}saveFile`,data:t,withCredentials:!0,onUploadProgress(t){l(t)}})).data}catch(t){s.style.width=0,d.style="visibility: hidden;",console.log(t),this.modalError.error()}}async saveDocument(t,e,n){try{return(await axios({method:"post",headers:{"Access-Control-Allow-Origin":this.url},url:`${this.url}saveDocument`,data:{folder:t,Data:e,filename:n},withCredentials:!0,onUploadProgress(t){l(t)}})).data}catch(t){s.style.width=0,d.style="visibility: hidden;",this.modalError.error()}}async getFiles(t){try{return(await fetch(`${this.url}getFiles`,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({folder:t}),credentials:"include"})).json()}catch{this.modalError.error()}}async deleteFile(t){try{return(await fetch(`${this.url}deleteFile`,{method:"delete",headers:{"Content-Type":"application/json"},body:JSON.stringify({filename:t}),credentials:"include"})).json()}catch(t){this.modalError.error()}}async publicFile(t,e){await fetch(`${this.url}publicFile`,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({filename:t,boolean:e}),credentials:"include"})}async newName(t,e){try{await fetch(`${this.url}newName`,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({filename:t,newName:e}),credentials:"include"})}catch(t){this.modalError.error()}}async checkIfTheIsPublic(t){try{const e=await fetch(`${this.url}checkIfTheIsPublic`,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({filename:t}),credentials:"include"});return await e.json()}catch(t){this.modalError.error()}}async search(t){try{return(await axios({method:"post",headers:{"Access-Control-Allow-Origin":this.url},url:`${this.url}filterFiles`,data:{name:t},withCredentials:!0})).data}catch(t){this.modalError.error()}}}var h=n(138);e()(h.Z,{insert:"head",singleton:!1}),h.Z.locals,new class{constructor(){this.minimize=document.getElementById("minimizeLoader"),this.closet=document.getElementById("minimizeCloset"),this.minimize.addEventListener("click",(t=>this.minimizeLoader())),this.closet.addEventListener("click",(t=>this.minimizeCloset())),this.container=document.querySelector(".containerUploading")}minimizeLoader(){this.container.classList.toggle("minimizeLoading")}minimizeCloset(){this.container.style="visibility: hidden"}},new class{constructor(){this.width=700,this.height=700,window.innerWidth<=700&&(this.width=window.innerWidth-30,this.height=window.innerWidth-100),this.startApp(this.width,this.height,!0),this.canvas.addEventListener("touchstart",(t=>this.start(t)),!1),this.canvas.addEventListener("touchmove",(t=>this.draw(t)),!1),this.canvas.addEventListener("mousedown",(t=>this.start(t)),!1),this.canvas.addEventListener("mousemove",(t=>this.draw(t)),!1),this.canvas.addEventListener("touchend",(t=>this.stop(t)),!1),this.canvas.addEventListener("mouseup",(t=>this.stop(t)),!1),this.canvas.addEventListener("mouseout",(t=>this.stop(t)),!1),this.is_drawing=!1,this.draw_color="black",this.draw_width=2,this.index=-1,this.restore_array=[],this.apiFile=new c,document.querySelectorAll(".color-field").forEach((t=>t.addEventListener("click",(()=>this.draw_color=t.style.background)))),this.colorDraw(),this.sizeDraw(),this.clear(),this.undo(),this.download(),this.update(),document.querySelector(".clear").addEventListener("click",(()=>this.clear()))}startApp(t,e,n){this.width=t,this.height=e;const r=new URLSearchParams(window.location.search);this.canvas=document.querySelector("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.ctx=this.canvas.getContext("2d"),n?(this.img=new Image,this.img.src=r.get("image"),this.img.onload=t=>this.ctx.drawImage(this.img,0,0,this.width,this.height),this.img.crossOrigin="use-credentials"):0===this.restore_array.length?this.ctx.drawImage(this.img,0,0,this.width,this.height):(this.imageData=this.restore_array[this.restore_array.length-1],this.resizeImageData(this.imageData,this.width,this.height)),this.name=r.get("name"),this.folder=r.get("folder")}async resizeImageData(t,e,n){const r=e>>0,i=n>>0,o=await window.createImageBitmap(t,0,0,t.width,t.height,{resizeWidth:r,resizeHeight:i});return this.ctx.drawImage(o,0,0),this.ctx.getImageData(0,0,r,i)}start(t){t.preventDefault();const e=t.clientX||t.touches[0].clientX,n=t.clientY||t.touches[0].clientY;this.is_drawing=!0,this.ctx.beginPath(),this.ctx.moveTo(e-this.canvas.offsetLeft,n-this.canvas.offsetTop),this.ctx.translate(0,0),this.draw(t)}draw(t){t.preventDefault();const e=t.clientX||t.touches[0].clientX,n=t.clientY||t.touches[0].clientY;this.is_drawing&&(this.ctx.lineTo(e-this.canvas.offsetLeft,n-this.canvas.offsetTop),this.ctx.strokeStyle=this.draw_color,this.ctx.lineWidth=this.draw_width,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.stroke())}stop(t){t.preventDefault(),this.is_drawing&&(this.ctx.stroke(),this.is_drawing=!1,this.ctx.closePath(),this.restore_array.push(this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height)),this.index++)}colorDraw(){const t=document.querySelector(".color-picker");t.addEventListener("change",(e=>this.draw_color=t.value))}sizeDraw(){const t=document.querySelector(".pen-ranger");t.addEventListener("change",(e=>this.draw_width=t.value))}clear(){this.ctx.clearRect(0,0,this.width,this.height),this.ctx.drawImage(this.img,0,0,this.width,this.height),this.restore_array=[],this.index=-1}undo(){document.querySelector(".undo").addEventListener("click",(t=>{if(this.index<=0)return this.clear();this.index--,this.restore_array.pop(),this.ctx.putImageData(this.restore_array[this.index],0,0)}))}download(){document.querySelector(".download").addEventListener("click",(t=>{t.target.href=this.canvas.toDataURL(),t.target.download=this.name}))}dataURLtoBlob(t){let e,n,r,i;for(n=atob(t.split(",")[1]),e=[],r=0,i=n.length;r<i;)e.push(n.charCodeAt(r)),r++;return new File([new Uint8Array(e)],`${this.name}`,{type:"image/png"})}async update(){document.querySelector(".update").addEventListener("click",(async()=>{const t=this.canvas.toDataURL(),e=this.dataURLtoBlob(t),n=new FormData;n.set("folder",this.folder),n.set("file",e),await this.apiFile.saveFile(n),window.location="http://localhost:4000"}))}}})()})();